{
  "title": "How I implemented relative imports with Pyodide",
  "link": "https://evanhahn.com/pyodide-relative-imports/",
  "published": "Thu, 11 Dec 2025 00:00:00 +0000",
  "summary": "<p>I was recently playing with <a href=\"https://pyodide.org/\">Pyodide</a>, the WebAssembly Python runtime. I wanted to have my main code import a utility file. Something like this:</p>\n<div class=\"highlight\"><pre tabindex=\"0\"><code class=\"language-python\"><span style=\"display: flex;\"><span><span style=\"color: #0f0;\"># in main code</span>\n</span></span><span style=\"display: flex;\"><span><span style=\"color: #f00;\">import</span> util\n</span></span><span style=\"display: flex;\"><span>print(util.triple(<span style=\"color: #f60;\">5</span>))\n</span></span><span style=\"display: flex;\"><span>\n</span></span><span style=\"display: flex;\"><span><span style=\"color: #0f0;\"># in util.py</span>\n</span></span><span style=\"display: flex;\"><span><span style=\"color: #f00;\">def</span> <span style=\"color: #ff0;\">triple</span>(n):\n</span></span><span style=\"display: flex;\"><span>    <span style=\"color: #f00;\">return</span> n * <span style=\"color: #f60;\">3</span>\n</span></span></code></pre></div><p>This took me awhile to figure out! <em>I&rsquo;m not convinced I have the best solution</em>, but here&rsquo;s what I did:</p>\n<ol>\n<li>Fetch <code>util.py</code> with <code>fetch</code>.</li>\n<li>Save it to Pyodide&rsquo;s virtual file system.</li>\n<li>Run the main code!</li>\n</ol>\n<p>Here&rsquo;s what my JavaScript loader code looked like:</p>\n<div class=\"highlight\"><pre tabindex=\"0\"><code class=\"language-javascript\"><span style=\"display: flex;\"><span><span style=\"color: #0f0;\">// Fetch `util.py` source\n</span></span></span><span style=\"display: flex;\"><span><span style=\"color: #f00;\">const</span> response = <span style=\"color: #f00;\">await</span> fetch(<span style=\"color: #87ceeb;\">\"util.py\"</span>);\n</span></span><span style=\"display: flex;\"><span><span style=\"color: #f00;\">if</span> (!response.ok) <span style=\"color: #f00;\">throw</span> <span style=\"color: #f00;\">new</span> Error(<span style=\"color: #87ceeb;\">\"Failed to load util.py\"</span>);\n</span></span><span style=\"display: flex;\"><span><span style=\"color: #f00;\">const</span> utilSource = <span style=\"color: #f00;\">await</span> response.text();\n</span></span><span style=\"display: flex;\"><span>\n</span></span><span style=\"display: flex;\"><span><span style=\"color: #0f0;\">// Save it to Pyodide's virtual file system.\n</span></span></span><span style=\"display: flex;\"><span><span style=\"color: #0f0;\">// Pyodide can import modules in `/home/pyodide`.\n</span></span></span><span style=\"display: flex;\"><span>pyodide.FS.writeFile(<span style=\"color: #87ceeb;\">\"/home/pyodide/util.py\"</span>, utilSource);\n</span></span><span style=\"display: flex;\"><span>\n</span></span><span style=\"display: flex;\"><span><span style=\"color: #0f0;\">// Run the main code!\n</span></span></span><span style=\"display: flex;\"><span>pyodide.runPython(<span style=\"color: #87ceeb;\">`\n</span></span></span><span style=\"display: flex;\"><span><span style=\"color: #87ceeb;\">import util\n</span></span></span><span style=\"display: flex;\"><span><span style=\"color: #87ceeb;\">print(util.triple(5))\n</span></span></span><span style=\"display: flex;\"><span><span style=\"color: #87ceeb;\">`</span>);\n</span></span></code></pre></div><p>This worked for me, but I wish there were a cleaner solution. Maybe Pyodide has a way to hook into <code>import</code>? If you have a better solution, <a href=\"https://evanhahn.com/contact/\">please reach out</a>!</p>",
  "id": "https://evanhahn.com/pyodide-relative-imports/"
}